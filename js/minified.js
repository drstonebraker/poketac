"use strict";function splashAnimation(){function t(){$("#ttt-logo__element").addClass("ttt-logo__element--"+n[o]).removeClass("ttt-logo__element--"+n[o-1]),3==o&&clearInterval(e),o++}var e,a=674,n=["board","tic","tac","toe"],o=1;setTimeout(function(){$("#ttt-logo__element").slideDown(a/4,function(){e=window.setInterval(t,a),setTimeout(function(){$("#pokemon-logo").removeClass("u-hidden").addClass("animated rubberBand").one(ANIMATION_END,function(){$(this).removeClass("animated rubberBand").off(ANIMATION_END)})},4*a)})},2*a)}var isIE=!!document.documentMode;isIE&&(document.body.innerHTML="<p class='browserupgrade'>You are using an <strong>outdated</strong> browser. This game is only playable with <a href='http://browsehappy.com/'>an upgraded browser</a>.</p>");const TRANSITION_END="webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",ANIMATION_END="webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",POKEMON={Bulbasaur:{type:"grass",advantage:"Squirtle",disadvantage:"Charmander",evolution:["Bulbasaur","Ivysaur","Venusaur","Mega-Venusaur"]},Charmander:{type:"fire",advantage:"Bulbasaur",disadvantage:"Squirtle",evolution:["Charmander","Charmeleon","Charizard","Mega-Charizard"]},Squirtle:{type:"water",advantage:"Charmander",disadvantage:"Bulbasaur",evolution:["Squirtle","Wartortle","Blastoise","Mega-Blastoise"]}};$(function(){function t(){C?(C=!1,$("#controls__toggle--sound").addClass("controls__toggle--off").attr("title","Sound Effects On")):(C=!0,$("#controls__toggle--sound").removeClass("controls__toggle--off").attr("title","Sound Effects Off"),I&&!document.getElementById("music").paused&&e())}function e(){var e=document.getElementById("music");0==e.paused?(e.pause(),$("#controls__toggle--music").addClass("controls__toggle--off").attr("title","Music On")):(e.play(),$("#controls__toggle--music").removeClass("controls__toggle--off").attr("title","Music Off"),I&&C&&t())}function a(){I||(document.getElementById("music").play(),$("#controls__toggle--music").removeClass("controls__toggle--off").attr("title","Music Off"),t()),I=!0;var e=document.documentElement,a=e.requestFullscreen||e.webkitRequestFullScreen||e.mozRequestFullScreen||e.msRequestFullscreen;a.call(e),screen.orientation.lock("portrait"),screen.lockOrientationUniversal=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation,screen.lockOrientationUniversal("portrait")}function n(){var t="<p class='modal-text modal-text--oak' id='modal-text'>Well, hello there!<br>It's nice to see you dropping by!</p>",e='<div class="modal__content modal__content--oak" id="modal__content--oak">'+t+"</div>";$("#char-tall--oak").removeClass("u-hidden"),$("#modal").removeClass("modal--splash"),$("#modal__content--splash").replaceWith(e),$("body").one("click",o)}function o(){var t="<p class='modal-text modal-text--oak' id='modal-text'>We’ve just discovered a new pastime here in the Pokemon world.  It’s all the rage.  They call it Tic-Tac-Toe!<br>That’s why you’re here, isn’t it?</p>",e='<button type="submit" class="button button--green" id="button-story">Tell me more</button>',a='<button type="submit" class="button button--green" id="button-quickstart">Yes, let\'s play!</button>',n='<div class="modal__content modal__content--oak" id="modal__content--oak">'+t+e+a+"</div>";$("#modal__content--oak").replaceWith(n),$("#button-story").one("click",i),$("#button-quickstart").one("click",function(){event.stopPropagation(),k="Player",h="female",$("#avatar--player").addClass("avatar--"+h),w="Charmander",y=POKEMON[w].type,f("#button-quickstart")})}function i(){var t="<p class='modal-text modal-text--oak' id='modal-text'>But look at me getting ahead of myself.  I’ve forgotten my manners!  I’m Professor Oak.<br>And you are...?</p>",e='<input autofocus type="text" placeholder="Type your name" class="name-input" id="name-input"></input>',a='<button type="submit" class="button button--green" id="button-player-name">OK</button>',n="<form id='nameForm'>"+e+a+"</form>",o='<div class="modal__content modal__content--oak" id="modal__content--oak">'+t+n+"</div>";$("#modal__content--oak").replaceWith(o),$("#button-player-name").on("click submit",function(){return""==$("#name-input").val()?$("#modal-text").text("Please, tell me your name."):(k=$("#name-input").val(),r()),!1})}function r(){var t="<p class='modal-text modal-text--oak' id='modal-text'>Welcome, "+k+"!  You’ll have to forgive me, but my eyes are going bad.  Can you tell me what you look like?</p>",e='<button type="button" class="button button--avatar button--avatar--player" id="button-player-avatar-f" data-avatar="female"><div class="button__avatar avatar avatar--female" id="button__avatar--female"></div></button>',a='<button type="button" class="button button--avatar button--avatar--player" id="button-player-avatar-m" data-avatar="male"><div class="button__avatar avatar avatar--male" id="button__avatar--male"></div></button>',n='<div class="modal__content modal__content--oak" id="modal__content--oak">'+t+e+a+"</div>";return $("#modal__content--oak").replaceWith(n),$(".button--avatar--player").one("click",function(){event.stopPropagation(),h=$(this).data().avatar,$("#avatar--player").addClass("avatar--"+h),s()}),!1}function s(){var t="<p class='modal-text modal-text--oak' id='modal-text'>You look like a confident young trainer, you say?  Wonderful!  You’ll need that confidence in your challenges.</p>",e='<div class="modal__content modal__content--oak" id="modal__content--oak">'+t+"</div>";$("#modal__content--oak").replaceWith(e),$("body").one("click",l)}function l(){function t(){event.stopPropagation(),w=$(this).data().pokemon,y=POKEMON[w].type,c()}var e="<p class='modal-text modal-text--oak' id='modal-text'>Before you play, you’ll need a pokemon.<br>I have three right here you can choose from!</p>",a='<button type="button" data-pokemon="Bulbasaur" class="pokeball" id="pokeball--0"><div class="pokeball__element pokeball__ball"></div><div class="pokeball__element pokeball__pokemon pokeball__pokemon--0" id="pokeball__pokemon--0"></div></button>',n='<button type="button" data-pokemon="Charmander" class="pokeball" id="pokeball--1"><div class="pokeball__element pokeball__ball"></div><div class="pokeball__element pokeball__pokemon pokeball__pokemon--1" id="pokeball__pokemon--1"></div></button>',o='<button type="button" data-pokemon="Squirtle" class="pokeball" id="pokeball--2"><div class="pokeball__element pokeball__ball"></div><div class="pokeball__element pokeball__pokemon pokeball__pokemon--2" id="pokeball__pokemon--2"></div></button>',i='<div class="modal__content modal__content--oak" id="modal__content--oak">'+e+a+n+o+"</div>";$("#modal__content--oak").replaceWith(i),I?$(".pokeball").on("touchstart",function(){var e=$(this).hasClass("pokeball--focus");$(".pokeball").removeClass("pokeball--focus").off("touchstart",t),e&&$(this).one("click",t),$(this).toggleClass("pokeball--focus")}):$(".pokeball").one("click",t)}function c(){var t="<p class='modal-text modal-text--oak' id='modal-text'>So you chose a "+w+"!<br><br>Because "+w+" is "+y+"-type, you’ll have an advantage against "+POKEMON[POKEMON[w].advantage].type+"-type pokemon, but a disadvantage against "+POKEMON[POKEMON[w].disadvantage].type+"-type pokemon.</p>",e='<div class="modal__content modal__content--oak" id="modal__content--oak">'+t+"</div>";$("#modal__content--oak").replaceWith(e),$("body").one("click",d)}function d(){var t="<p class='modal-text modal-text--oak' id='modal-text'>There are eight different gym leaders you can challenge.<br><br>Some of them are tougher than others!</p>",e='<div class="modal__content modal__content--oak" id="modal__content--oak">'+t+"</div>";$("#modal__content--oak").replaceWith(e),$("body").one("click",u)}function u(){var t="<p class='modal-text modal-text--oak' id='modal-text'>Some gym leaders also offer unique badges to players who can beat them.  With enough badges, you might even see your pokemon evolve. See if you can collect all eight!</p>",e='<div class="modal__content modal__content--oak" id="modal__content--oak">'+t+"</div>";$("#modal__content--oak").replaceWith(e),$("body").one("click",m)}function m(){var t="<p class='modal-text modal-text--oak' id='modal-text'>Are you ready to play?</p>",e='<button type="button" class="button button--green" id="button-play">Ready!</button>',a='<div class="modal__content modal__content--oak" id="modal__content--oak">'+t+e+"</div>";$("#modal__content--oak").replaceWith(a),$("#button-play").one("click",function(){f("#button-play")})}function f(t){$("#gamespace").removeClass("u-hidden"),$(t).addClass("animated bounceBtn").one(ANIMATION_END,function(){$(this).removeClass("animated bounceBtn").off(ANIMATION_END);var t="<p class='modal-text modal-text--oak' id='modal-text'>Good luck!</p>",e='<div class="modal__content modal__content--oak" id="modal__content--oak">'+t+"</div>";$("#modal__content--oak").replaceWith(e),setTimeout(function(){$("#modal").addClass("animated bounceOutDownCenter").one(ANIMATION_END,function(){$(this).hide().removeClass("animated bounceOutDownCenter").off(ANIMATION_END),b()})},1e3)});var e=700,a="cubic-bezier(.9,0,.96,.5)",n=$("#overworld").offset().left,o="translateX("+n+"px) scale(50)",i="transform "+e+"ms "+a+", opacity "+e+"ms "+a,r=$(window).width()/2-n,s={transform:o,"-webkit-transform":o,"transform-origin":r+"px center","-webkit-transform-origin":r+"px center",transition:i,"-webkit-transition":"-webkit-"+i,transition:"-webkit-"+i,transition:"transform "+e+"ms "+a+", -webkit-"+i,opacity:"0"};$("#overworld").css(s).one(TRANSITION_END,function(){$(this).hide().off(TRANSITION_END)}),clearTimeout(O)}function b(){$("#tray").removeClass("u-blurred"),$("#challengers, #heading--challengers").removeClass("u-blurred").one(TRANSITION_END,function(){$(".button--avatar").prop("disabled",!1)}),$(".button--avatar").on("click",function(){$(".button--avatar").prop("disabled",!0),N=$(this).data().gymnumber,$("#marquee").removeClass("u-hidden"),$("#avatar--challenger").addClass("avatar--challenger-"+N),$(".button--avatar").off("click"),$(this).addClass("animated bounceOutUp button--no-outline").one(ANIMATION_END,function(){$(this).off(ANIMATION_END),$(".button--avatar").not(this).addClass("animated fadeOutDown"),$("#heading--challengers").addClass("animated fadeOutDown").one(ANIMATION_END,function(){$(this).off(ANIMATION_END),$("#challengers, #heading--challengers").hide().addClass("u-blurred"),$(".button--avatar, #heading--challengers").removeClass("animated fadeOutDown bounceOutUp button--no-outline"),$("#marquee").addClass("marquee--drop").one(TRANSITION_END,function(){$(this).off(TRANSITION_END),$("#marquee__dialogue").addClass("marquee__dialogue--swingHinge"),setTimeout(function(){$("#gameboard").removeClass("u-hidden").addClass("animated fadeIn"),$("#marquee__dialogue__text").flowtype({minFont:13}),_()},1e3)})})})})}function _(){function t(){function t(){var t;"advantage"===Q?(E("You go first!","announce"),t="player"):(E(x()[N].name+" goes first.","announce"),t="challenger"),setTimeout(function(){n(t),$("#gameboard").removeClass("animated fadeIn")},3e3)}e(),a(),h(),Z={thinking:["Hmm... what should I do","Let me think a second","You may be better than I thought","Let's see here...","What do you think, "+J,"This is a tough one"],start:["Let's do this, "+J,"Start it right, "+J,J+", show them who's boss!","This is going to be easy"],8:["Go for the win, "+J+"!","We've got this, "+J,"It's over, "+k,"I knew this would be easy","It feels good to win","Better luck next time, "+k+"!"],counter:["You know what to do, "+J,"Remember your training, "+J,"Get 'em back, "+J,"Play smart, "+J],2:["Keep a sharp eye, "+J,"Don't let them win, "+J,"We need to block them!","I see what you're doing there","You won't win that easy, "+k],4:["Think ahead, "+J,"I'm going to try to be sneaky","Let's see how you handle this!"],random:[J+", give it your best shot","I'm trusting you, "+J,"Make it a good one, "+J,"Go for it, "+J]};var o="advantage"===Q?"a disadvantage.":"an advantage.",i="Challenger "+x()[N].name+"'s "+J+" has "+o;E(i,"announce",t)}function e(){var t=Math.floor(A.length/2);X=POKEMON[w].evolution[t]}function a(){var t=Math.floor(N/2);Q=0===Math.floor(2*Math.random())?"advantage":"disadvantage",J=POKEMON[POKEMON[w][Q]].evolution[t]}function n(t){if(V=t,y(t),"player"==t)for(var e in j)0==j[e]&&$("#gameboard__cell--"+e).prop("disabled",!1);else $(".gameboard__cell").prop("disabled",!0),"challenger"==t?d():$(".marquee__avatar-box").removeClass("marquee__avatar-box--active")}function o(){var t,e=I();switch(e){case 1:var a=[j.b1,j.a2,j.c2,j.b3].indexOf(1);if(1==j.b2)t=["a1","a3","c1","c3"];else if(-1!=a)switch(a){case 0:t=["a1","c1"];break;case 1:t=["a1","a3"];break;case 2:t=["c1","c3"];break;case 3:t=["a1","c3"]}else t=["b2"];break;case 0:t=["a1","a3","b2","c1","c3"];break;default:return!1}return E(O(Z.start),"speak"),u("challenger",O(t)),!0}function i(t,e){var a=[];for(var n in F)F[n]==t&&(a=a.concat(_(Y[n])));return e&&(a=l(a)),a.length>0?(E(O(Z[t]),"speak"),u("challenger",O(a)),!0):!1}function r(){var t=_();E(O(Z.random),"speak"),u("challenger",O(t))}function s(){var t=I(),e=C(j,L),a=C(j,P);switch(t){case 5:if(-1!=U.indexOf(a[0]))-1!=z.indexOf(e[0])?u("challenger",G[0]):-1!=U.indexOf(e[0])?u("challenger",O(_(U))):-1!=Y.d1.indexOf(a[0])?u("challenger",_(Y.d1)[0]):u("challenger",_(Y.d2)[0]);else{if(-1==z.indexOf(e[0]))return!1;u("challenger",O(U))}return E(O(Z.counter),"speak"),!0;case 6:if(4==j[G[0]])if(4==_(z).length)u("challenger",O(z));else{var n=U.find(function(t){return-1!=e.indexOf(t)}),o=z.find(function(t){return-1!=e.indexOf(t)}),i=_(U).find(function(t){for(var e in Y)if(-1!=["c1","c3","r1","r3"].indexOf(e)&&-1!=Y[e].indexOf(n)&&-1!=Y[e].indexOf(t))for(var a in Y)if(-1!=["c1","c3","r1","r3"].indexOf(a)&&-1!=Y[a].indexOf(o)&&-1!=Y[a].indexOf(t))return!0;return!1});u("challenger",i)}else u("challenger",G[0]);return E(O(Z.counter),"speak"),!0;default:return!1}}function l(t){var e=[];for(var a in t)T(t,t[a])>1&&-1==e.indexOf(t[a])&&e.push(t[a]);return 0==e.length?t:e}function c(t){-1!=[6,7].indexOf(t)&&o()||-1!=[1,2,4,5,6,7].indexOf(t)&&i(B)||-1!=[3,4,5,6,7].indexOf(t)&&i(W)||-1!=[7].indexOf(t)&&s()||-1!=[7].indexOf(t)&&i(H,!0)||-1!=[2,5,6].indexOf(t)&&i(H)||r()}function d(){var t=2e3,e=4e3,a=O([Math.floor(Math.random()*e),0])+t;a>3e3&&setTimeout(function(){E(O(Z.thinking),"speak")},1e3),setTimeout(function(){c(N)},a)}function u(t,e){var a,n,o;"player"===t?(a=L,n=X.toLowerCase(),o=0):"challenger"===t&&(a=P,n=J.toLowerCase(),o=700),setTimeout(function(){j[e]=a,$("#"+e).addClass("animated pokemon--bounce pokemon pokemon--"+n).one(ANIMATION_END,function(){$(this).removeClass("animated pokemon--bounce").addClass("pokemon--wiggle").off(ANIMATION_END)}),m(t)},o)}function m(t){h(),f()||b()?$(".gameboard__cell").prop("disabled",!0):"player"===t?n("challenger"):"challenger"===t&&n("player")}function f(){for(var t in F)if(3===F[t]||12===F[t])return n(""),12===F[t]?D("lost",t):3===F[t]&&S(t,!0),!0;return!1}function b(){for(var t in j)if(0==j[t])return!1;return n(""),D("tied"),!0}function _(t){var e=[],a=t||Object.keys(j);for(var n in a)0==j[a[n]]&&e.push(a[n]);return e}function h(){F={c1:j.a1+j.a2+j.a3,c2:j.b1+j.b2+j.b3,c3:j.c1+j.c2+j.c3,r1:j.a1+j.b1+j.c1,r2:j.a2+j.b2+j.c2,r3:j.a3+j.b3+j.c3,d1:j.a1+j.b2+j.c3,d2:j.a3+j.b2+j.c1}}function y(t){$(".marquee__avatar-box").removeClass("marquee__avatar-box--active"),$("#marquee__avatar-box--"+t).addClass("marquee__avatar-box--active")}function O(t){return t[Math.floor(Math.random()*t.length)]}function T(t,e){var a=0;for(var n in t)e==t[n]&&a++;return a}function I(){var t=0;for(var e in j)t+=j[e];return t}function C(t,e){var a=[];for(var n in t)t[n]==e&&a.push(n);return a}function E(t,e,a){var n,o;"announce"===e?(n="animated bounceInRight",o="animated bounceOutLeft"):(n="speak",o="unspeak"),clearTimeout(K),$("#marquee__dialogue__text").off(ANIMATION_END).finish().removeClass("animated bounceInRight bounceOutLeft speak unspeak").text(t).addClass(n).one(ANIMATION_END,function(){$(this).removeClass(n).off(ANIMATION_END)}),K=setTimeout(function(){$("#marquee__dialogue__text").addClass(o).one(ANIMATION_END,function(){$(this).removeClass(o).text(""),a&&a()})},2500)}function M(){$("#gameboard").addClass("animated fadeOut").one(ANIMATION_END,function(){$(this).removeClass("animated fadeOut").addClass("u-hidden").off(ANIMATION_END)})}function D(t,e){var a=$({});$(".pokemon").removeClass("pokemon--wiggle"),$("#game-end-wordart, #game-end-wordart__element--"+t).removeClass("u-hidden"),a.delay(350,"lostOrTiedAnimation").queue("lostOrTiedAnimation",function(a){"lost"==t&&S(e,!1),a()}).delay(1500,"lostOrTiedAnimation").queue("lostOrTiedAnimation",function(e){if("lost"!=t){for(var a in j)j[a]==L?$("#"+a).addClass("pokemon--rotateLeft"):$("#"+a).addClass("pokemon--rotateRight"),$("#pokemon-container--"+a).addClass("pokemon-container--fadeOutDown");$(".pokemon").last().one(ANIMATION_END,function(){$(".pokemon").attr("class",""),$(".pokemon-container").removeClass("pokemon-container--fadeOutDown"),e()})}else e()}).delay(1e3,"lostOrTiedAnimation").queue("lostOrTiedAnimation",function(e){var a=100;$("#game-end-wordart__element--"+t+" .letter__element").each(function(t,e){setTimeout(function(){$(e).removeClass("u-hidden").addClass("wordart__element--bounceInOut").one(ANIMATION_END,function(){$(this).removeClass("wordart__element--bounceInOut").addClass("u-hidden").off(ANIMATION_END)})},a*t,e)}).last().one(ANIMATION_END,function(){$(this).off(ANIMATION_END),$("#game-end-wordart, #game-end-wordart__element--"+t).addClass("u-hidden")}),e()}).delay(2e3,"lostOrTiedAnimation").queue("lostOrTiedAnimation",function(t){M(),t()}).delay(2e3,"lostOrTiedAnimation").queue("lostOrTiedAnimation",function(){E(x()[N].lostOrTiedMessage,"speak",p)}),a.dequeue("lostOrTiedAnimation")}function S(t,e){var a=document.documentElement.clientWidth,n=a/2+a/10+100,o=n+a/15,i=a+200,r=150*a/1e3+150,s=1e3,l=40*a/1e3+150,c=$("#"+Y[t][0]+", #"+Y[t][1]+", #"+Y[t][2]),d=$({});$(".pokemon").removeClass("pokemon--wiggle"),d.delay(350,"victoryAnimation").queue("victoryAnimation",function(t){c.addClass("pokemon--victoryGrow"),t()}).delay(1e3,"victoryAnimation").queue("victoryAnimation",function(e){for(var a in j)-1==Y[t].indexOf(a)&&(j[a]==L?$("#"+a).addClass("pokemon--rotateLeft"):$("#"+a).addClass("pokemon--rotateRight"),$("#pokemon-container--"+a).addClass("pokemon-container--fadeOutDown"));$(".pokemon").not(c).last().one(ANIMATION_END,e)}).queue("victoryAnimation",function(t){$(".pokemon").not(c).attr("class","").last().off(ANIMATION_END),$(".pokemon-container").removeClass("pokemon-container--fadeOutDown"),e?(-1==A.indexOf(N)&&$("#badge__btn--"+N).css({opacity:"0",transform:tt.translate0,"-webkit-transform":tt.translate0}).children(".badge__icon").css({transform:tt.scale0,"-webkit-transform":tt.scale0}),t()):d.clearQueue("victoryAnimation")}).queue("victoryAnimation",function(t){$("#game-end-wordart__element--victory, #game-end-wordart").removeClass("u-hidden");var e=r+"ms",a=r/2+"ms",o={"transition-duration":e,"-webkit-transition-duration":e,"transition-delay":a,"-webkit-transition-delay":a};$(".victory-container").css(o).addClass("victory-container--showing"),$("#victory-gradient--r").css({transform:"translate(-"+n+"px)","-webkit-transform":"translate(-"+n+"px)","transition-duration":r+"ms","-webkit-transition-duration":r+"ms"}),$("#victory-gradient--l").css({transform:"translate("+n+"px)","-webkit-transform":"translate("+n+"px)","transition-duration":r+"ms","-webkit-transition-duration":r+"ms"}).one(TRANSITION_END,t)}).queue("victoryAnimation",function(t){$("#victory-gradient--r").css({transform:"translate(-"+o+"px)","-webkit-transform":"translate(-"+o+"px)","transition-duration":s+"ms","-webkit-transition-duration":s+"ms"}),$("#victory-gradient--l").off(TRANSITION_END).css({transform:"translate("+o+"px)","-webkit-transform":"translate("+o+"px)","transition-duration":s+"ms","-webkit-transition-duration":s+"ms"}).one(TRANSITION_END,t)}).queue("victoryAnimation",function(t){$("#victory-gradient--r").css({transform:"translate(-"+i+"px)","-webkit-transform":"translate(-"+i+"px)","transition-duration":l+"ms","-webkit-transition-duration":l+"ms"}),$("#victory-gradient--l").off(TRANSITION_END).css({transform:"translate("+i+"px)","-webkit-transform":"translate("+i+"px)","transition-duration":l+"ms","-webkit-transition-duration":l+"ms"}).one(TRANSITION_END,t)}).queue("victoryAnimation",function(t){M(),$("#victory-gradient--r, #victory-gradient--l").off(TRANSITION_END).css({transform:"","-webkit-transform":"","transition-duration":"","-webkit-transition-duration":""}),t()}).delay(1e3,"victoryAnimation").queue("victoryAnimation",function(t){$("#game-end-wordart__element--victory").addClass("animated fadeOutDown").one(ANIMATION_END,t)}).queue("victoryAnimation",function(t){$("#game-end-wordart__element--victory, #game-end-wordart").addClass("u-hidden").removeClass("animated fadeOutDown").off(ANIMATION_END),$(".victory-container").css({"transition-duration":"","-webkit-transition-duration":""}).removeClass("victory-container--showing"),t()}).delay(500,"victoryAnimation").queue("victoryAnimation",function(){-1==A.indexOf(N)?q():p()}),d.dequeue("victoryAnimation")}function q(){E(x()[N].victoryMessages[0],"speak",function(){E(x()[N].victoryMessages[1],"speak",function(){E(x()[N].victoryMessages[2],"speak",function(){E(x()[N].victoryMessages[3],"speak",R)})})})}function R(){function t(){$(".badge__icon--big").closest(".badge__btn").css({transform:g().transformHangDown,"-webkit-transform":g().transformHangDown}),n=setTimeout(function(){$(".badge__icon--big").closest(".badge__btn").css({transform:g().transformHangUp,"-webkit-transform":g().transformHangUp})},1500)}function e(e){$("#badge__icon--"+e).removeClass("u-invisible").css({transition:tt.transitionScale0,"-webkit-transition":"-webkit-"+tt.transitionScale0,transition:"-webkit-"+tt.transitionScale0,transition:tt.transitionScale0+", -webkit-"+tt.transitionScale0,transform:tt.scale1,"-webkit-transform":tt.scale1}).one(TRANSITION_END,function(){event.stopPropagation(),$(this).off(TRANSITION_END).css({transition:tt.transitionScale1,"-webkit-transition":"-webkit-"+tt.transitionScale1,transition:"-webkit-"+tt.transitionScale1,transition:tt.transitionScale1+", -webkit-"+tt.transitionScale1,transform:tt.scale2,"-webkit-transform":tt.scale2})}).closest(".badge__btn").css({transition:tt.transitionTranslate0,"-webkit-transition":tt.transitionTranslate0,transform:tt.translate1,"-webkit-transform":tt.translate1,opacity:"1"}).on(TRANSITION_END,function(){$(this).children(".badge__icon").addClass("badge__icon--big").css({transition:tt.transitionScale2,"-webkit-transition":"-webkit-"+tt.transitionScale2,transition:"-webkit-"+tt.transitionScale2,transition:tt.transitionScale2+", -webkit-"+tt.transitionScale2,transform:"","-webkit-transform":""}),$(this).off(TRANSITION_END).css({transition:tt.transitionTranslate1,"-webkit-transition":tt.transitionTranslate1,transform:g().transformHangUp,"-webkit-transform":g().transformHangUp}).on(TRANSITION_END,function(){event.srcElement==$(this)[0]&&event.elapsedTime<.6&&($(this).children(".badge__icon").css({transition:"","-webkit-transition":""}),$(this).off(TRANSITION_END).attr("disabled",!1).css({transition:"transform 1500ms ease-in-out","-webkit-transition":"-webkit-transform 1500ms ease-in-out",transition:"-webkit-transform 1500ms ease-in-out",transition:"transform 1500ms ease-in-out, -webkit-transform 1500ms ease-in-out"}).on("mouseenter",function(){clearInterval(a),clearTimeout(n),$(this).css({transform:g().transformCenter,"-webkit-transform":g().transformCenter,transition:"transform 80ms ease-in-out","-webkit-transition":"-webkit-transform 80ms ease-in-out",transition:"-webkit-transform 80ms ease-in-out",transition:"transform 80ms ease-in-out, -webkit-transform 80ms ease-in-out"})}).on("mouseleave",function(){$(this).css({transform:g().transformHangUp,"-webkit-transform":g().transformHangUp}).one(TRANSITION_END,function(){$(this).off(TRANSITION_END).css({transition:"transform 1500ms ease-in-out","-webkit-transition":"-webkit-transform 1500ms ease-in-out",transition:"-webkit-transform 1500ms ease-in-out",transition:"transform 1500ms ease-in-out, -webkit-transform 1500ms ease-in-out"}),t(),a=setInterval(t,3e3)})}).one("click",function(){$(this).off("click").attr("disabled",!0).css(o).children(".badge__icon--big").css(o).removeClass("badge__icon--big").one(TRANSITION_END,function(){$(this).off(TRANSITION_END).children(".badge__shimmer").removeClass("u-invisible"),v(N),setTimeout(p,1e3)})}),t(),a=setInterval(t,3e3))})})}A.push(N);var a,n,o={transform:"","-webkit-transform":"",transition:"transform 750ms cubic-bezier(0.175, 0.885, 0.32, 1.275)","-webkit-transition":"-webkit-transform 750ms cubic-bezier(0.175, 0.885, 0.32, 1.275)",transition:"-webkit-transform 750ms cubic-bezier(0.175, 0.885, 0.32, 1.275)",transition:"transform 750ms cubic-bezier(0.175, 0.885, 0.32, 1.275), -webkit-transform 750ms cubic-bezier(0.175, 0.885, 0.32, 1.275)"};e(N)}$("#marquee__dialogue").off(ANIMATION_END);const B=8,W=2,H=4,P=4,L=1,Y={c1:["a1","a2","a3"],c2:["b1","b2","b3"],c3:["c1","c2","c3"],r1:["a1","b1","c1"],r2:["a2","b2","c2"],r3:["a3","b3","c3"],d1:["a1","b2","c3"],d2:["a3","b2","c1"]},z=["b1","a2","c2","b3"],U=["a1","c1","a3","c3"],G=["b2"];var K,j={a1:0,b1:0,c1:0,a2:0,b2:0,c2:0,a3:0,b3:0,c3:0},F={},V="",X="",Q="",J="",Z={},tt={transitionTranslate0:"all 600ms cubic-bezier(0.550, 0.055, 0.675, 0.190)",transitionTranslate1:"all 400ms cubic-bezier(0.175, 0.885, 0.320, 1)",transitionScale0:"transform 25ms linear",transitionScale1:"transform 575ms cubic-bezier(0.550, 0.055, 0.675, 0.190)",transitionScale2:"transform 400ms cubic-bezier(0.175, 0.885, 0.320, 1)",scale0:"scale3d(4, 4, 4)",scale1:"scale3d(.1, .1, .1)",scale2:"scale3d(1, 1, 1)",translate0:"translate3d("+(g().translateLeft+100)+"px, "+(g().translateTop-300)+"px, 0px)",translate1:"translate3d("+(g().translateLeft+20)+"px, "+(g().translateTop+40)+"px, 0px)"};t(),$(".gameboard__cell").on("click",function(){$(this).blur().prop("disabled",!0),u("player",$(this).data().cell)})}function v(t){$("#badge__icon--"+t+" > span").stop(),$("#badge__icon--"+t+" > span").css("background-position","-40px -40px").animate({"background-position":"38px 38px"},450)}function p(){$("#marquee").removeClass("marquee--drop").one(TRANSITION_END,function(){$(this).off(TRANSITION_END),$("#marquee__dialogue").removeClass("marquee__dialogue--swingHinge"),$(".pokemon, .pokemon--rotateRight").attr("class",""),$("#marquee").addClass("u-hidden"),$(".gameboard__cell").off("click"),$("#avatar--challenger").removeClass("avatar--challenger-"+N),$("#challengers, #heading--challengers").show(),b()})}function g(){var t=$("#badge__icon--"+N).closest(".badge").offset().top,e=$("#screen-center").offset().top,a=$("#badge__icon--"+N).closest(".badge").offset().left,n=$("#screen-center").offset().left,o=e-t,i=n-a,r={translateLeft:i,translateTop:o,transformHangUp:"translate3d("+i+"px, "+(o-8)+"px, 0px)",transformHangDown:"translate3d("+i+"px, "+(o+8)+"px, 0px)",transformCenter:"translate3d("+i+"px, "+o+"px, 0px)"};return r}var k,h,w,y,N,O,T,I=!1,A=[];const x=function(){return{0:{name:"Brock",victoryMessages:["Wow. That went fast.","You're really good at this game!","Here, take this BOULDER BADGE","You deserve it!"],lostOrTiedMessage:"Good effort. I'm sure you'll do better next time."},1:{name:"Misty",victoryMessages:["What? No way!","That's not fair!","Can't we do a rematch?","Oh well. Here's your CASCADE BADGE"],lostOrTiedMessage:"Yay! I didn't lose this time!"},2:{name:"Lt. Surge",victoryMessages:["Oh boy!","You are one tough cookie!","But I'll bet you just got lucky","Luck or not, this THUNDER BADGE is yours"],lostOrTiedMessage:"Ha. You belong in the little leagues."},3:{name:"Erika",victoryMessages:["Hey, good for you!","You won! Congratulations!","You must have trained hard for this","Let me give you this RAINBOW BADGE"],lostOrTiedMessage:"Hehe. You played well. Maybe next time will be better!"},4:{name:"Koga",victoryMessages:["You came out of nowhere!","I couldn't outmaneuver you, "+k,"You're on your way to becoming a true master","This SOUL BADGE will show what you're capable of"],lostOrTiedMessage:"You'll have to train harder if you want to beat a blackbelt like me."},5:{name:"Sabrina",victoryMessages:["I underestimated you, "+k,"I'm going to have to meditate on what went wrong","I see more victories in your future","Take this MARSH BADGE with you as you go"],lostOrTiedMessage:"People underestimate me."},6:{name:"Blaine",victoryMessages:["HAHA, we have a winner!","Riddle me this:","What do winners win?","A VOLCANO BADGE, that's what!"],lostOrTiedMessage:"Can't take the heat, can you?"},7:{name:"Giovanni",victoryMessages:["No. It isn't possible","How!? I never lose!","The is the end of me","..."],lostOrTiedMessage:"I never lose"}}};var C=!0;$("#controls__toggle--music").click(e),$("#controls__toggle--sound").click(t),$("body").on("touchstart",a),new Promise(function(t){var e;e="./img/johto-kanto-map-3000x1062.jpg";var a=document.createElement("img");a.src=e,a.id="overworld",a.className="overworld",a.onload=t,$("#view").prepend(a),$("#overworld").attr("alt","A map of the Pokemon world in the background")}).then(function(){function t(){event?(clearTimeout(O),o=Math.floor($("#overworld").offset().left+$("#overworld").width()-document.documentElement.clientWidth),n=i?o:Math.floor(-$("#overworld").offset().left),0>o&&(n=0,i=!0)):n=Math.floor($("#overworld").width()-document.documentElement.clientWidth),a=n*r;var t=0==n?"":"transform "+a+"ms linear",s={transition:t,"-webkit-transition":t?"-webkit-"+t:"",transition:t?"-webkit-"+t:"",transition:t?t+", -webkit-"+t:""};$("#overworld").css(s),e()}function e(){var e,n;if(i){var o=Math.floor($("#overworld").width()-document.documentElement.clientWidth);n="translate3d(-"+o+"px, 0px, 0px)",e={transform:n,"-webkit-transform":n}}else e={transform:"","-webkit-transform":""};$("#overworld").css(e),O=setTimeout(function(){i=i?!1:!0,t()},a)}var a,n,o,i=!0,r=150;t(),$(window).on("resize focus",t).on("blur",function(){$("#overworld").css({transform:"translateX("+$("#overworld").offset().left+"px)","-webkit-transform":"translateX("+$("#overworld").offset().left+"px)",transition:"","-webkit-transition":""})}),$("#view").addClass("view--gym")}),$(window).keypress(function(t){32!==t.which&&13!==t.which||document.activeElement!=document.body||$("body").trigger("click")}),$("#controls").on("touchstart click",function(){event.stopPropagation()}),$(".badge__screen").mouseenter(function(){v($(this).data().badgenumber)}),$(window).on("resize",function(){$(".badge__icon--big").length>0&&(clearTimeout(T),$(".badge__icon--big").closest(".badge__btn").css({transform:g().transformHangUp,"-webkit-transform":g().transformHangUp,transition:"","-webkit-transition":""}),T=setTimeout(function(){$(".badge__icon--big").closest(".badge__btn").css({transition:"transform 1500ms ease-in-out","-webkit-transition":"-webkit-transform 1500ms ease-in-out",transition:"-webkit-transform 1500ms ease-in-out",transition:"transform 1500ms ease-in-out, -webkit-transform 1500ms ease-in-out"})},0))}),splashAnimation(),$("body").one("click",n),"serviceWorker"in navigator&&navigator.serviceWorker.register("/service-worker.js").then(function(){})});
